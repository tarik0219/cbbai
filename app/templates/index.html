{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block content %}

<div class="page-header">
    <h1>üèÄ 2024-25 CBB-AI Rankings</h1>
    <p class="subtitle">AI-Powered College Basketball Team Rankings & Analytics</p>
</div>

<div class="table-container">
    <table class="table table-modern table-hover" id="rankingsTable">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Logo</th>
                <th>Team Name</th>
                <th>Conf</th>
                <th>OFF</th>
                <th>DEF</th>
                <th>TEMPO</th>
            </tr>
        </thead>
        <tbody>
        {% for team in data %}
            <tr>
                <td>
                    <span class="rank-badge {% if team.ranks.rank <= 10 %}top-10{% elif team.ranks.rank <= 25 %}top-25{% endif %}">
                        {{team.ranks.rank}}
                    </span>
                </td>
                <td>
                    <img src="{{ ''.join(['https://a.espncdn.com/i/teamlogos/ncaa/500/',team.id,'.png']) }}"
                        onerror="this.onerror=null; this.src='/static/pics/basketball.png'"
                        alt="{{ ''.join([team.teamName]) }}" 
                        class="team-logo"
                        title="{{ ''.join([team.teamName]) }}">
                </td>
                <td>
                    <a href="{{ ''.join(['/schedule/', team.id ]) }}" class="team-name">
                        {{team.teamName}}
                    </a>
                </td>
                <td>
                    <a href="{{ ''.join(['/conference/', team.conference]) }}">
                        {{team.conference}}
                    </a>
                </td>
                <td>
                    <strong>{{"%.2f"|format(team.average.offRating)}}</strong>
                    <br>
                    <span class="stats-badge">#{{"{}".format(team.ranks.rankOff)}}</span>
                </td>
                <td>
                    <strong>{{"%.2f"|format(team.average.defRating)}}</strong>
                    <br>
                    <span class="stats-badge">#{{"{}".format(team.ranks.rankDef)}}</span>
                </td>
                <td>
                    <strong>{{"%.2f"|format(team.average.TempoRating)}}</strong>
                    <br>
                    <span class="stats-badge">#{{"{}".format(team.ranks.rankTempo)}}</span>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<script>
$(document).ready(function() {
    $('#rankingsTable').DataTable({
        "pageLength": 25,
        "order": [[0, "asc"]],
        "responsive": true,
        "language": {
            "search": "Search teams:",
            "lengthMenu": "Show _MENU_ teams per page",
            "info": "Showing _START_ to _END_ of _TOTAL_ teams"
        }
    });
});
</script>

{% endblock %}